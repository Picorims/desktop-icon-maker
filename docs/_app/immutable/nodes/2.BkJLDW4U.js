var En=Object.defineProperty;var In=(s,t,e)=>t in s?En(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var Rt=(s,t,e)=>In(s,typeof t!="symbol"?t+"":t,e);import{s as _e,a as fe,u as he,g as de,b as pe,c as ge,x as vt,n as ve,r as kn,k as yn,e as dn,y as pn}from"../chunks/scheduler.Df_9wCsF.js";import{S as $e,i as Ce,e as a,t as R,s as $,c,a as T,b as N,d as f,f as C,o as d,y as gn,g as E,h as r,j as be,k as U,l as D,u as Z,z as y,v as Y,w as X,A as et,x as K,B as M,C as Nt,D as Sn,E as me,F as Tn}from"../chunks/index.Cs_y9ulF.js";import{w as xn}from"../chunks/index.DpZa-WCV.js";function mn(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function We(s){const t=new Blob([s],{type:"image/svg+xml"});return URL.createObjectURL(t)}const zn=s=>({}),_n=s=>({}),Pn=s=>({}),vn=s=>({}),Ln=s=>({}),$n=s=>({});function On(s){let t,e,o,n,i,l,h,u,v,w,b;const j=s[3].content,L=fe(j,s,s[2],$n),S=s[3].suffix,z=fe(S,s,s[2],vn),q=s[3].additional,O=fe(q,s,s[2],_n);return{c(){t=a("div"),e=a("label"),o=a("span"),n=R(s[0]),i=R(":"),l=$(),h=a("div"),L&&L.c(),u=$(),z&&z.c(),v=$(),w=a("div"),O&&O.c(),this.h()},l(g){t=c(g,"DIV",{class:!0});var P=T(t);e=c(P,"LABEL",{class:!0});var A=T(e);o=c(A,"SPAN",{class:!0});var F=T(o);n=N(F,s[0]),i=N(F,":"),F.forEach(f),l=C(A),h=c(A,"DIV",{class:!0});var V=T(h);L&&L.l(V),V.forEach(f),u=C(A),z&&z.l(A),A.forEach(f),v=C(P),w=c(P,"DIV",{class:!0});var k=T(w);O&&O.l(k),k.forEach(f),P.forEach(f),this.h()},h(){d(o,"class","label-text svelte-eiz46d"),d(h,"class","content svelte-eiz46d"),d(e,"class","container svelte-eiz46d"),d(w,"class","additional svelte-eiz46d"),d(t,"class","row svelte-eiz46d"),gn(t,"noBorder",s[1])},m(g,P){E(g,t,P),r(t,e),r(e,o),r(o,n),r(o,i),r(e,l),r(e,h),L&&L.m(h,null),r(e,u),z&&z.m(e,null),r(t,v),r(t,w),O&&O.m(w,null),b=!0},p(g,[P]){(!b||P&1)&&be(n,g[0]),L&&L.p&&(!b||P&4)&&he(L,j,g,g[2],b?pe(j,g[2],P,Ln):de(g[2]),$n),z&&z.p&&(!b||P&4)&&he(z,S,g,g[2],b?pe(S,g[2],P,Pn):de(g[2]),vn),O&&O.p&&(!b||P&4)&&he(O,q,g,g[2],b?pe(q,g[2],P,zn):de(g[2]),_n),(!b||P&2)&&gn(t,"noBorder",g[1])},i(g){b||(U(L,g),U(z,g),U(O,g),b=!0)},o(g){D(L,g),D(z,g),D(O,g),b=!1},d(g){g&&f(t),L&&L.d(g),z&&z.d(g),O&&O.d(g)}}}function Rn(s,t,e){let{$$slots:o={},$$scope:n}=t,{title:i="title"}=t,{noBorder:l=!1}=t;return s.$$set=h=>{"title"in h&&e(0,i=h.title),"noBorder"in h&&e(1,l=h.noBorder),"$$scope"in h&&e(2,n=h.$$scope)},[i,l,n,o]}class ht extends $e{constructor(t){super(),Ce(this,t,Rn,On,_e,{title:0,noBorder:1})}}var Xt=(s=>(s.ROUNDED="rounded",s.BEZIER="bezier",s))(Xt||{});const Nn=[16,20,24,32,40,48,64,128,256];var st=(s=>(s.PNG="image/png",s.JPG="image/jpeg",s.ICO="image/x-icon",s))(st||{});const H=xn({version:1,svgText:"",imgFormat:"image/png",size:256,backgroundColor:"#222222",strokeColor:"#eeeeee",opacity:1,padding:0,radius:32,radiusType:"rounded"}),Ze=xn(null);async function Bn(s){const t=Nn,e=document.createElement("canvas"),o=e.getContext("2d");if(!o)throw new Error("Could not get 2d context");const n=[],i=await createImageBitmap(s);for(const u of t)e.width=u,e.height=u,o.clearRect(0,0,u,u),o.beginPath(),o.drawImage(i,0,0,u,u),n.push(await An(e));const l=Un(n);return new Blob([new Uint8Array(l)],{type:"image/x-icon"})}async function An(s){return new Promise((t,e)=>{s.toBlob(function(o){if(!o)e(new Error("Could not get blob"));else{const n=new FileReader;n.addEventListener("loadend",()=>{n.result?t(new Uint8Array(n.result)):e(new Error("Could not read result"))}),n.readAsArrayBuffer(o)}},"image/png")})}/**
 * @see https://stackoverflow.com/a/65678517
 * @see https://en.wikipedia.org/wiki/ICO_(file_format)
 *
 * (tweaked by `Picorims` (typescript typing)
 *
 * (made by `@vanowm`)
 *
 * (inspired by `@id01`: https://stackoverflow.com/a/63700962)
 *
 * @license CC-BY-SA-4.0
 */function Un(s){const t=[0,0,1,0,s.length&255,s.length>>8&255];let e=[],o=[];for(let n=0,i,l,h,u=0;n<s.length;n++){h=Array.from(s[n]),l=[0,0,0,0,1,0,32,0],i=h.length;for(let v=0;v<4;v++)l[l.length]=i>>8*v&255;i=t.length+(l.length+4)*s.length+u;for(let v=0;v<4;v++)l[l.length]=i>>8*v&255;u+=h.length,e=e.concat(l),o=o.concat(h)}return t.concat(e,o)}class Dn{constructor(t){Rt(this,"canvas");Rt(this,"backgroundCanvas");Rt(this,"config");Rt(this,"drawing",!1);Rt(this,"lastImg",null);Rt(this,"lastSvgText","");this.canvas=t.canvas,this.backgroundCanvas=t.backgroundCanvas,this.config={...t.config},this.setCanvasSize(this.config.size)}setCanvasSize(t){this.canvas.width=t,this.canvas.height=t,this.backgroundCanvas.width=t,this.backgroundCanvas.height=t,this.refreshBackground()}setConfig(t){console.log("update config in renderer",t);const e=this.config.size;this.config={...t},this.config.size!==e&&(console.log(`update size from ${e} to ${t.size}`),this.setCanvasSize(t.size)),this.refresh(this.config)}refreshBackground(){if(console.log("refresh background"),!this.backgroundCanvas)return;const t=this.backgroundCanvas.getContext("2d");if(!t)return;const e=this.config.size;t.clearRect(0,0,e,e);const o=8;for(let n=0;n<e;n+=o)for(let i=0;i<e;i+=o)t.fillStyle=(n/o+i/o)%2===0?"#666":"#aaa",t.fillRect(n,i,8,8)}roundedRectBezier(t,e,o){t.beginPath(),t.moveTo(o,0),t.lineTo(e-o,0),t.bezierCurveTo(e,0,e,0,e,o),t.lineTo(e,e-o),t.bezierCurveTo(e,e,e,e,e-o,e),t.lineTo(o,e),t.bezierCurveTo(0,e,0,e,0,e-o),t.lineTo(0,o),t.bezierCurveTo(0,0,0,0,o,0),t.closePath()}forceRefresh(){this.refresh(this.config)}refresh(t){if(this.drawing){console.log("already drawing");return}if(console.log("refresh"),t.svgText===""||!this.canvas)return;const e=this.canvas.getContext("2d");if(!e)return;if(t.radiusType===Xt.ROUNDED&&!e.roundRect){alert("It looks like your browser does not support the roundRect method. You can either use a different browser or change the radius type");return}this.drawing=!0,e.clearRect(0,0,t.size,t.size),e.fillStyle=t.backgroundColor,e.globalAlpha=t.opacity,t.radiusType===Xt.ROUNDED?(e.beginPath(),e.roundRect(0,0,t.size,t.size,t.radius),e.fill()):t.radiusType===Xt.BEZIER&&this.roundedRectBezier(e,t.size,t.radius),e.fill();const o={...t},n=()=>{const i=this.lastImg,l=o.size-2*o.padding;if(!i){console.warn("no img to draw"),this.drawing=!1;return}console.log("draw img"),e.save(),e.fillStyle="transparent",e.globalAlpha=1;const h=document.createElement("canvas");h.width=l,h.height=l;const u=h.getContext("2d");if(!u){this.drawing=!1;return}u.drawImage(i,0,0,l,l),u.globalCompositeOperation="source-in",u.fillStyle=o.strokeColor,u.fillRect(0,0,l,l),e.drawImage(h,o.padding,o.padding,l,l),e.restore(),this.drawing=!1};if(t.svgText===this.lastSvgText){n();return}else{const l=new DOMParser().parseFromString(t.svgText,"image/svg+xml").querySelector("svg");if(!l)return;l.setAttribute("stroke","#000000");const h=We(l.outerHTML),u=new Image(t.size,t.size);u.src=h,this.lastImg=u,this.lastSvgText=t.svgText,u.addEventListener("load",n)}}async toBlob(t){return new Promise((e,o)=>{this.canvas.toBlob(n=>{n||o("Could not export to blob as "+t),e(n)},t)})}async exportToFormat(t){if(t===st.PNG||t===st.JPG)return await this.toBlob(t);if(t===st.ICO){const e=await this.toBlob(st.PNG);return await Bn(e)}else throw new Error("Unsupported format "+t)}}function Cn(s,t,e){const o=s.slice();return o[20]=t[e],o}function Gn(s){let t,e,o="Import",n,i;return{c(){t=a("span"),e=a("button"),e.textContent=o,this.h()},l(l){t=c(l,"SPAN",{slot:!0});var h=T(t);e=c(h,"BUTTON",{"data-svelte-h":!0}),y(e)!=="svelte-ik8sxy"&&(e.textContent=o),h.forEach(f),this.h()},h(){d(t,"slot","content")},m(l,h){E(l,t,h),r(t,e),n||(i=et(e,"click",s[5]),n=!0)},p:ve,d(l){l&&f(t),n=!1,i()}}}function Mn(s){let t,e,o="Export",n,i;return{c(){t=a("span"),e=a("button"),e.textContent=o,this.h()},l(l){t=c(l,"SPAN",{slot:!0});var h=T(t);e=c(h,"BUTTON",{"data-svelte-h":!0}),y(e)!=="svelte-kquwuq"&&(e.textContent=o),h.forEach(f),this.h()},h(){d(t,"slot","content")},m(l,h){E(l,t,h),r(t,e),n||(i=et(e,"click",s[6]),n=!0)},p:ve,d(l){l&&f(t),n=!1,i()}}}function Hn(s){let t,e,o;return{c(){t=a("input"),this.h()},l(n){t=c(n,"INPUT",{slot:!0,type:!0,min:!0}),this.h()},h(){d(t,"slot","content"),d(t,"type","number"),d(t,"min","8")},m(n,i){E(n,t,i),M(t,s[2].size),e||(o=et(t,"input",s[10]),e=!0)},p(n,i){i&4&&Nt(t.value)!==n[2].size&&M(t,n[2].size)},d(n){n&&f(t),e=!1,o()}}}function bn(s){let t,e=s[20]+"",o,n,i;function l(){return s[9](s[20])}return{c(){t=a("button"),o=R(e),this.h()},l(h){t=c(h,"BUTTON",{class:!0});var u=T(t);o=N(u,e),u.forEach(f),this.h()},h(){d(t,"class","svelte-1c3spk4")},m(h,u){E(h,t,u),r(t,o),n||(i=et(t,"click",l),n=!0)},p(h,u){s=h},d(h){h&&f(t),n=!1,i()}}}function jn(s){let t,e=mn(s[4]),o=[];for(let n=0;n<e.length;n+=1)o[n]=bn(Cn(s,e,n));return{c(){t=a("div");for(let n=0;n<o.length;n+=1)o[n].c();this.h()},l(n){t=c(n,"DIV",{slot:!0,class:!0});var i=T(t);for(let l=0;l<o.length;l+=1)o[l].l(i);i.forEach(f),this.h()},h(){d(t,"slot","additional"),d(t,"class","button-list svelte-1c3spk4")},m(n,i){E(n,t,i);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(t,null)},p(n,i){if(i&20){e=mn(n[4]);let l;for(l=0;l<e.length;l+=1){const h=Cn(n,e,l);o[l]?o[l].p(h,i):(o[l]=bn(h),o[l].c(),o[l].m(t,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=e.length}},d(n){n&&f(t),Sn(o,n)}}}function qn(s){let t,e,o;return{c(){t=a("input"),this.h()},l(n){t=c(n,"INPUT",{slot:!0,type:!0}),this.h()},h(){d(t,"slot","content"),d(t,"type","color")},m(n,i){E(n,t,i),M(t,s[2].backgroundColor),e||(o=et(t,"input",s[11]),e=!0)},p(n,i){i&4&&M(t,n[2].backgroundColor)},d(n){n&&f(t),e=!1,o()}}}function Fn(s){let t,e=s[2].backgroundColor+"",o;return{c(){t=a("span"),o=R(e),this.h()},l(n){t=c(n,"SPAN",{slot:!0});var i=T(t);o=N(i,e),i.forEach(f),this.h()},h(){d(t,"slot","suffix")},m(n,i){E(n,t,i),r(t,o)},p(n,i){i&4&&e!==(e=n[2].backgroundColor+"")&&be(o,e)},d(n){n&&f(t)}}}function Vn(s){let t,e,o;return{c(){t=a("input"),this.h()},l(n){t=c(n,"INPUT",{slot:!0,type:!0}),this.h()},h(){d(t,"slot","content"),d(t,"type","color")},m(n,i){E(n,t,i),M(t,s[2].strokeColor),e||(o=et(t,"input",s[12]),e=!0)},p(n,i){i&4&&M(t,n[2].strokeColor)},d(n){n&&f(t),e=!1,o()}}}function Jn(s){let t,e=s[2].strokeColor+"",o;return{c(){t=a("span"),o=R(e),this.h()},l(n){t=c(n,"SPAN",{slot:!0});var i=T(t);o=N(i,e),i.forEach(f),this.h()},h(){d(t,"slot","suffix")},m(n,i){E(n,t,i),r(t,o)},p(n,i){i&4&&e!==(e=n[2].strokeColor+"")&&be(o,e)},d(n){n&&f(t)}}}function Wn(s){let t,e,o;return{c(){t=a("input"),this.h()},l(n){t=c(n,"INPUT",{slot:!0,type:!0,min:!0,max:!0,step:!0}),this.h()},h(){d(t,"slot","content"),d(t,"type","range"),d(t,"min","0"),d(t,"max","1"),d(t,"step","0.01")},m(n,i){E(n,t,i),M(t,s[2].opacity),e||(o=[et(t,"change",s[13]),et(t,"input",s[13])],e=!0)},p(n,i){i&4&&M(t,n[2].opacity)},d(n){n&&f(t),e=!1,kn(o)}}}function Zn(s){let t,e=s[2].opacity+"",o;return{c(){t=a("span"),o=R(e),this.h()},l(n){t=c(n,"SPAN",{slot:!0});var i=T(t);o=N(i,e),i.forEach(f),this.h()},h(){d(t,"slot","suffix")},m(n,i){E(n,t,i),r(t,o)},p(n,i){i&4&&e!==(e=n[2].opacity+"")&&be(o,e)},d(n){n&&f(t)}}}function Yn(s){let t,e,o;return{c(){t=a("input"),this.h()},l(n){t=c(n,"INPUT",{slot:!0,type:!0,min:!0}),this.h()},h(){d(t,"slot","content"),d(t,"type","number"),d(t,"min","0")},m(n,i){E(n,t,i),M(t,s[2].padding),e||(o=et(t,"input",s[14]),e=!0)},p(n,i){i&4&&Nt(t.value)!==n[2].padding&&M(t,n[2].padding)},d(n){n&&f(t),e=!1,o()}}}function Xn(s){let t,e,o;return{c(){t=a("input"),this.h()},l(n){t=c(n,"INPUT",{slot:!0,type:!0,min:!0}),this.h()},h(){d(t,"slot","content"),d(t,"type","number"),d(t,"min","0")},m(n,i){E(n,t,i),M(t,s[2].radius),e||(o=et(t,"input",s[15]),e=!0)},p(n,i){i&4&&Nt(t.value)!==n[2].radius&&M(t,n[2].radius)},d(n){n&&f(t),e=!1,o()}}}function Kn(s){let t,e,o="Bezier",n,i="Rounded",l,h;return{c(){t=a("select"),e=a("option"),e.textContent=o,n=a("option"),n.textContent=i,this.h()},l(u){t=c(u,"SELECT",{slot:!0});var v=T(t);e=c(v,"OPTION",{"data-svelte-h":!0}),y(e)!=="svelte-x6p4tm"&&(e.textContent=o),n=c(v,"OPTION",{"data-svelte-h":!0}),y(n)!=="svelte-fk70pm"&&(n.textContent=i),v.forEach(f),this.h()},h(){e.__value=Xt.BEZIER,M(e,e.__value),n.__value=Xt.ROUNDED,M(n,n.__value),d(t,"slot","content"),s[2].radiusType===void 0&&yn(()=>s[16].call(t))},m(u,v){E(u,t,v),r(t,e),r(t,n),me(t,s[2].radiusType,!0),l||(h=et(t,"change",s[16]),l=!0)},p(u,v){v&4&&me(t,u[2].radiusType)},d(u){u&&f(t),l=!1,h()}}}function Qn(s){let t,e,o,n="Configuration",i,l,h,u,v,w,b,j,L,S,z,q,O,g,P,A,F,V,k,B,at="Force refresh",J,W,ct,it,nt,Lt,dt,G,ut;return l=new ht({props:{title:"Import",$$slots:{content:[Gn]},$$scope:{ctx:s}}}),u=new ht({props:{title:"Export",$$slots:{content:[Mn]},$$scope:{ctx:s}}}),w=new ht({props:{title:"Size",$$slots:{additional:[jn],content:[Hn]},$$scope:{ctx:s}}}),j=new ht({props:{title:"Background color",$$slots:{suffix:[Fn],content:[qn]},$$scope:{ctx:s}}}),S=new ht({props:{title:"Icon stroke color",$$slots:{suffix:[Jn],content:[Vn]},$$scope:{ctx:s}}}),q=new ht({props:{title:"Opacity",$$slots:{suffix:[Zn],content:[Wn]},$$scope:{ctx:s}}}),g=new ht({props:{title:"Padding",$$slots:{content:[Yn]},$$scope:{ctx:s}}}),A=new ht({props:{title:"Radius",$$slots:{content:[Xn]},$$scope:{ctx:s}}}),V=new ht({props:{title:"Radius type",$$slots:{content:[Kn]},$$scope:{ctx:s}}}),{c(){t=a("div"),e=a("fieldset"),o=a("legend"),o.textContent=n,i=$(),Z(l.$$.fragment),h=$(),Z(u.$$.fragment),v=$(),Z(w.$$.fragment),b=$(),Z(j.$$.fragment),L=$(),Z(S.$$.fragment),z=$(),Z(q.$$.fragment),O=$(),Z(g.$$.fragment),P=$(),Z(A.$$.fragment),F=$(),Z(V.$$.fragment),k=$(),B=a("button"),B.textContent=at,J=$(),W=a("div"),ct=a("canvas"),it=$(),nt=a("canvas"),this.h()},l(_){t=c(_,"DIV",{class:!0});var I=T(t);e=c(I,"FIELDSET",{class:!0});var x=T(e);o=c(x,"LEGEND",{"data-svelte-h":!0}),y(o)!=="svelte-1m56lz4"&&(o.textContent=n),i=C(x),Y(l.$$.fragment,x),h=C(x),Y(u.$$.fragment,x),v=C(x),Y(w.$$.fragment,x),b=C(x),Y(j.$$.fragment,x),L=C(x),Y(S.$$.fragment,x),z=C(x),Y(q.$$.fragment,x),O=C(x),Y(g.$$.fragment,x),P=C(x),Y(A.$$.fragment,x),F=C(x),Y(V.$$.fragment,x),k=C(x),B=c(x,"BUTTON",{class:!0,"data-svelte-h":!0}),y(B)!=="svelte-iklsmi"&&(B.textContent=at),x.forEach(f),J=C(I),W=c(I,"DIV",{class:!0,style:!0});var lt=T(W);ct=c(lt,"CANVAS",{class:!0}),T(ct).forEach(f),it=C(lt),nt=c(lt,"CANVAS",{class:!0}),T(nt).forEach(f),lt.forEach(f),I.forEach(f),this.h()},h(){d(B,"class","g-margin"),d(e,"class","svelte-1c3spk4"),d(ct,"class","main-canvas svelte-1c3spk4"),d(nt,"class","background-canvas svelte-1c3spk4"),d(W,"class","canvases svelte-1c3spk4"),d(W,"style",Lt=`width: ${s[2].size}px; height: ${s[2].size}px`),d(t,"class","container svelte-1c3spk4")},m(_,I){E(_,t,I),r(t,e),r(e,o),r(e,i),X(l,e,null),r(e,h),X(u,e,null),r(e,v),X(w,e,null),r(e,b),X(j,e,null),r(e,L),X(S,e,null),r(e,z),X(q,e,null),r(e,O),X(g,e,null),r(e,P),X(A,e,null),r(e,F),X(V,e,null),r(e,k),r(e,B),r(t,J),r(t,W),r(W,ct),s[18](ct),r(W,it),r(W,nt),s[19](nt),dt=!0,G||(ut=et(B,"click",s[17]),G=!0)},p(_,[I]){const x={};I&8388608&&(x.$$scope={dirty:I,ctx:_}),l.$set(x);const lt={};I&8388608&&(lt.$$scope={dirty:I,ctx:_}),u.$set(lt);const pt={};I&8388612&&(pt.$$scope={dirty:I,ctx:_}),w.$set(pt);const Kt={};I&8388612&&(Kt.$$scope={dirty:I,ctx:_}),j.$set(Kt);const Bt={};I&8388612&&(Bt.$$scope={dirty:I,ctx:_}),S.$set(Bt);const gt={};I&8388612&&(gt.$$scope={dirty:I,ctx:_}),q.$set(gt);const Qt={};I&8388612&&(Qt.$$scope={dirty:I,ctx:_}),g.$set(Qt);const At={};I&8388612&&(At.$$scope={dirty:I,ctx:_}),A.$set(At);const ft={};I&8388612&&(ft.$$scope={dirty:I,ctx:_}),V.$set(ft),(!dt||I&4&&Lt!==(Lt=`width: ${_[2].size}px; height: ${_[2].size}px`))&&d(W,"style",Lt)},i(_){dt||(U(l.$$.fragment,_),U(u.$$.fragment,_),U(w.$$.fragment,_),U(j.$$.fragment,_),U(S.$$.fragment,_),U(q.$$.fragment,_),U(g.$$.fragment,_),U(A.$$.fragment,_),U(V.$$.fragment,_),dt=!0)},o(_){D(l.$$.fragment,_),D(u.$$.fragment,_),D(w.$$.fragment,_),D(j.$$.fragment,_),D(S.$$.fragment,_),D(q.$$.fragment,_),D(g.$$.fragment,_),D(A.$$.fragment,_),D(V.$$.fragment,_),dt=!1},d(_){_&&f(t),K(l),K(u),K(w),K(j),K(S),K(q),K(g),K(A),K(V),s[18](null),s[19](null),G=!1,ut()}}}function to(s,t,e){let o,n;ge(s,H,k=>e(2,o=k)),ge(s,Ze,k=>e(3,n=k));let{svgText:i=""}=t,{imgFormat:l=st.PNG}=t;const h=[16,24,32,48,64,96,128,256,512];let u,v;function w(){const k=document.createElement("input");k.type="file",k.accept=".json",k.addEventListener("change",async()=>{var W;console.log("import config");const B=(W=k.files)==null?void 0:W[0];if(!B)return;const at=await B.text(),J=JSON.parse(at);H.set(J)}),k.click()}function b(){console.log("export config");const k=JSON.stringify(o),B=new Blob([k],{type:"application/json"}),at=URL.createObjectURL(B),J=document.createElement("a");J.href=at,J.download="config.json",J.click()}const j=k=>vt(H,o.size=k,o);function L(){o.size=Nt(this.value),H.set(o)}function S(){o.backgroundColor=this.value,H.set(o)}function z(){o.strokeColor=this.value,H.set(o)}function q(){o.opacity=Nt(this.value),H.set(o)}function O(){o.padding=Nt(this.value),H.set(o)}function g(){o.radius=Nt(this.value),H.set(o)}function P(){o.radiusType=Tn(this),H.set(o)}const A=()=>n==null?void 0:n.forceRefresh();function F(k){dn[k?"unshift":"push"](()=>{u=k,e(0,u)})}function V(k){dn[k?"unshift":"push"](()=>{v=k,e(1,v)})}return s.$$set=k=>{"svgText"in k&&e(7,i=k.svgText),"imgFormat"in k&&e(8,l=k.imgFormat)},s.$$.update=()=>{s.$$.dirty&4&&o.size<8&&vt(H,o.size=8,o),s.$$.dirty&4&&o.padding<0&&vt(H,o.padding=0,o),s.$$.dirty&4&&o.padding>o.size/2-8&&vt(H,o.padding=o.size/2-8,o),s.$$.dirty&4&&o.radius<0&&vt(H,o.radius=0,o),s.$$.dirty&4&&o.radius>o.size/2&&vt(H,o.radius=o.size/2,o),s.$$.dirty&128&&vt(H,o.svgText=i,o),s.$$.dirty&256&&vt(H,o.imgFormat=l,o),s.$$.dirty&15&&u&&v&&!n&&vt(Ze,n=new Dn({canvas:u,backgroundCanvas:v,config:o}),n),s.$$.dirty&12&&o&&(n==null||n.setConfig(o))},[u,v,o,n,h,w,b,i,l,j,L,S,z,q,O,g,P,A,F,V]}class eo extends $e{constructor(t){super(),Ce(this,t,to,Qn,_e,{svgText:7,imgFormat:8})}}function no(s){let t,e;const o=s[2].default,n=fe(o,s,s[1],null);return{c(){t=a("a"),n&&n.c(),this.h()},l(i){t=c(i,"A",{href:!0,target:!0,rel:!0});var l=T(t);n&&n.l(l),l.forEach(f),this.h()},h(){d(t,"href",s[0]),d(t,"target","_blank"),d(t,"rel","noopener noreferrer")},m(i,l){E(i,t,l),n&&n.m(t,null),e=!0},p(i,[l]){n&&n.p&&(!e||l&2)&&he(n,o,i,i[1],e?pe(o,i[1],l,null):de(i[1]),null),(!e||l&1)&&d(t,"href",i[0])},i(i){e||(U(n,i),e=!0)},o(i){D(n,i),e=!1},d(i){i&&f(t),n&&n.d(i)}}}function oo(s,t,e){let{$$slots:o={},$$scope:n}=t,{href:i}=t;return s.$$set=l=>{"href"in l&&e(0,i=l.href),"$$scope"in l&&e(1,n=l.$$scope)},[i,n,o]}class ne extends $e{constructor(t){super(),Ce(this,t,oo,no,_e,{href:0})}}function so(s){let t;return{c(){t=R("forum post")},l(e){t=N(e,"forum post")},m(e,o){E(e,t,o)},d(e){e&&f(t)}}}function io(s){let t;return{c(){t=R("here")},l(e){t=N(e,"here")},m(e,o){E(e,t,o)},d(e){e&&f(t)}}}function lo(s){let t;return{c(){t=R("here")},l(e){t=N(e,"here")},m(e,o){E(e,t,o)},d(e){e&&f(t)}}}function ro(s){let t;return{c(){t=R("Lucide icon picker")},l(e){t=N(e,"Lucide icon picker")},m(e,o){E(e,t,o)},d(e){e&&f(t)}}}function ao(s){let t,e="Enter an SVG above.";return{c(){t=a("p"),t.textContent=e,this.h()},l(o){t=c(o,"P",{class:!0,"data-svelte-h":!0}),y(t)!=="svelte-qz0a9i"&&(t.textContent=e),this.h()},h(){d(t,"class","feedback")},m(o,n){E(o,t,n)},p:ve,d(o){o&&f(t)}}}function co(s){let t,e="Invalid SVG.";return{c(){t=a("p"),t.textContent=e,this.h()},l(o){t=c(o,"P",{class:!0,"data-svelte-h":!0}),y(t)!=="svelte-1vep5tf"&&(t.textContent=e),this.h()},h(){d(t,"class","feedback")},m(o,n){E(o,t,n)},p:ve,d(o){o&&f(t)}}}function uo(s){let t,e;return{c(){t=a("img"),this.h()},l(o){t=c(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pn(t.src,e=We(s[0]))||d(t,"src",e),d(t,"alt","icon preview"),d(t,"class","icon-preview svelte-1vzdq3v")},m(o,n){E(o,t,n)},p(o,n){n&1&&!pn(t.src,e=We(o[0]))&&d(t,"src",e)},d(o){o&&f(t)}}}function fo(s){let t,e,o=".png",n,i=".jpg/.jpeg",l,h=".ico (Windows)",u,v;return{c(){t=a("select"),e=a("option"),e.textContent=o,n=a("option"),n.textContent=i,l=a("option"),l.textContent=h,this.h()},l(w){t=c(w,"SELECT",{slot:!0});var b=T(t);e=c(b,"OPTION",{"data-svelte-h":!0}),y(e)!=="svelte-og1agb"&&(e.textContent=o),n=c(b,"OPTION",{"data-svelte-h":!0}),y(n)!=="svelte-1jmtfl6"&&(n.textContent=i),l=c(b,"OPTION",{"data-svelte-h":!0}),y(l)!=="svelte-22x3mf"&&(l.textContent=h),b.forEach(f),this.h()},h(){e.__value=st.PNG,M(e,e.__value),n.__value=st.JPG,M(n,n.__value),l.__value=st.ICO,M(l,l.__value),d(t,"slot","content"),s[1]===void 0&&yn(()=>s[5].call(t))},m(w,b){E(w,t,b),r(t,e),r(t,n),r(t,l),me(t,s[1],!0),u||(v=et(t,"change",s[5]),u=!0)},p(w,b){b&2&&me(t,w[1])},d(w){w&&f(t),u=!1,v()}}}function wn(s){let t,e="<strong>It is recommended to use a size of 256 for .ico files.</strong>";return{c(){t=a("p"),t.innerHTML=e},l(o){t=c(o,"P",{"data-svelte-h":!0}),y(t)!=="svelte-pu9nbo"&&(t.innerHTML=e)},m(o,n){E(o,t,n)},d(o){o&&f(t)}}}function ho(s){let t;return{c(){t=R("GitHub")},l(e){t=N(e,"GitHub")},m(e,o){E(e,t,o)},d(e){e&&f(t)}}}function po(s){let t,e="<h1>Desktop Icon Maker</h1>",o,n,i,l="This tool allows you to create custom icons to use in place of default directory icons.",h,u,v,w,b,j="Windows",L,S,z,q="Export as .ico, or export as PNG and convert it to .ico.",O,g,P=`If you exported using .ico, open the file with GIMP and reexport it as .ico to fix the
					image encoding issues. (Otherwise the icon will look pixelated in the file explorer.)`,A,F,V=`Place your icon in the directory you want to customize, or a subdirectory of this
					directory.`,k,B,at,J,W="The icon cannot be relocated, or it will reset to the default directory icon!",ct,it,nt,Lt="To fix this (advanced!):",dt,G,ut,_,I,x,lt,pt,Kt=`still store the icon in a subdirectory, and manually fix the icon every time
									you relocate the directory.`,Bt,gt,Qt="Place your icon in a subdirectory of the directory you want to customize.",At,ft,we,$t,ke,ye,Ut,Ye=`Put a semi-colon (&quot;;&quot;) in front of IconResource to comment the line:
								<pre>;IconResource= ...</pre>`,Te,mt,xe,Dt,Xe="IconFile=..\\subdirectory\\icon.ico<br/>IconIndex=0",Ee,Ct,Ie,Se,Gt,Ke="Save the file, and press F5 to refresh the directory.",ze,Mt,Qe="To have",Pe,Ht,tn=`On <strong>MacOS</strong>, follow this Apple support tutorial:
			<a href="https://support.apple.com/en-gb/guide/mac-help/-mchlp2313/mac" target="_blank" rel="noopener noreferrer">tutorial</a>`,Le,jt,en=`On <strong>Linux</strong>, right click on your directory, click on &quot;Properties&quot;, and in
			&quot;Basic&quot; tab, click on the directory image.`,Oe,qt,nn="Step 1 - Pick an icon",Re,bt,Ne,wt,Be,Ft,on="export it as SVG.",Ae,kt,Ue,oe,se,Vt,sn="Step 2 - Create the icon",De,Jt,ln="Customize the appearance below:",Ge,yt,Me,Wt,rn="Step 3 - Export in the desired format",He,Tt,je,ie,xt,an="Export",le,Et,Zt,cn="MIT License - Copyright (c) 2024 Charly Schmidt alias Picorims (picorims.contact@gmail.com)",qe,te,It,re,Fe,un;x=new ne({props:{href:"https://answers.microsoft.com/en-us/windows/forum/windows_11-files/custom-folder-icons-on-networked-drives/528391e8-4dc8-41bc-8682-7f8f0314fa24?messageId=1f2f80dc-6a37-40ea-9eab-644445730ac2",$$slots:{default:[so]},$$scope:{ctx:s}}}),$t=new ne({props:{href:"https://answers.microsoft.com/en-us/windows/forum/all/cant-find-desktopini-file/6061b3bd-ee8c-4da9-bbe7-a26de8af38ab",$$slots:{default:[io]},$$scope:{ctx:s}}}),Ct=new ne({props:{href:"https://learn.microsoft.com/en-us/windows/win32/shell/how-to-customize-folders-with-desktop-ini#create-a-desktopini-file",$$slots:{default:[lo]},$$scope:{ctx:s}}}),wt=new ne({props:{href:"https://lucide.dev/icons/",$$slots:{default:[ro]},$$scope:{ctx:s}}});function fn(m,p){return p&1&&(oe=null),oe==null&&(oe=!!(m[0]&&Je(m[0]))),oe?uo:m[0]?co:ao}let ae=fn(s,-1),rt=ae(s);yt=new eo({props:{svgText:Je(s[0])?s[0].trim():"",imgFormat:s[1]}}),Tt=new ht({props:{title:"Format",noBorder:!0,$$slots:{content:[fo]},$$scope:{ctx:s}}});let Q=s[1]===st.ICO&&s[2].size!==256&&wn();return It=new ne({props:{href:"http://github.com/picorims/desktop-icon-maker",$$slots:{default:[ho]},$$scope:{ctx:s}}}),{c(){t=a("header"),t.innerHTML=e,o=$(),n=a("main"),i=a("p"),i.textContent=l,h=$(),u=a("ul"),v=a("li"),w=R("On "),b=a("strong"),b.textContent=j,L=R(`:
			`),S=a("ul"),z=a("li"),z.textContent=q,O=$(),g=a("li"),g.textContent=P,A=$(),F=a("li"),F.textContent=V,k=$(),B=a("li"),at=R(`Right click on the directory, click on "Properties", then "Customize", and "Change Icon".
					`),J=a("strong"),J.textContent=W,ct=$(),it=a("details"),nt=a("summary"),nt.textContent=Lt,dt=$(),G=a("ul"),ut=a("li"),_=a("strong"),I=R(`Disclaimer: it may not work due to "EnableShellShortcutIconRemotePath", this this
								`),Z(x.$$.fragment),lt=R(`.
								Windows moment. The fallback is to `),pt=a("strong"),pt.textContent=Kt,Bt=$(),gt=a("li"),gt.textContent=Qt,At=$(),ft=a("li"),we=R(`Open the desktop.ini file in the directory you want to customize. (System files
								should be visible in directory settings, a tutorial is available
								`),Z($t.$$.fragment),ke=R(".)"),ye=$(),Ut=a("li"),Ut.innerHTML=Ye,Te=$(),mt=a("li"),xe=R(`Add the following lines (adapt the path to your icon):
								`),Dt=a("pre"),Dt.innerHTML=Xe,Ee=R(`
								This is documented `),Z(Ct.$$.fragment),Ie=R("."),Se=$(),Gt=a("li"),Gt.textContent=Ke,ze=$(),Mt=a("li"),Mt.textContent=Qe,Pe=$(),Ht=a("li"),Ht.innerHTML=tn,Le=$(),jt=a("li"),jt.innerHTML=en,Oe=$(),qt=a("h2"),qt.textContent=nn,Re=$(),bt=a("p"),Ne=R(`Go to an icon picker, such as the
		`),Z(wt.$$.fragment),Be=R(`
		and choose an icon. Once you found your favorite one,
		`),Ft=a("strong"),Ft.textContent=on,Ae=$(),kt=a("textarea"),Ue=$(),rt.c(),se=$(),Vt=a("h2"),Vt.textContent=sn,De=$(),Jt=a("p"),Jt.textContent=ln,Ge=$(),Z(yt.$$.fragment),Me=$(),Wt=a("h2"),Wt.textContent=rn,He=$(),Z(Tt.$$.fragment),je=$(),Q&&Q.c(),ie=$(),xt=a("button"),xt.textContent=an,le=$(),Et=a("footer"),Zt=a("p"),Zt.textContent=cn,qe=$(),te=a("p"),Z(It.$$.fragment),this.h()},l(m){t=c(m,"HEADER",{"data-svelte-h":!0}),y(t)!=="svelte-1e39gtl"&&(t.innerHTML=e),o=C(m),n=c(m,"MAIN",{});var p=T(n);i=c(p,"P",{"data-svelte-h":!0}),y(i)!=="svelte-18uypje"&&(i.textContent=l),h=C(p),u=c(p,"UL",{});var _t=T(u);v=c(_t,"LI",{});var St=T(v);w=N(St,"On "),b=c(St,"STRONG",{"data-svelte-h":!0}),y(b)!=="svelte-ngfwa5"&&(b.textContent=j),L=N(St,`:
			`),S=c(St,"UL",{});var ot=T(S);z=c(ot,"LI",{"data-svelte-h":!0}),y(z)!=="svelte-1nsap1a"&&(z.textContent=q),O=C(ot),g=c(ot,"LI",{"data-svelte-h":!0}),y(g)!=="svelte-bnkv74"&&(g.textContent=P),A=C(ot),F=c(ot,"LI",{"data-svelte-h":!0}),y(F)!=="svelte-2hm6mk"&&(F.textContent=V),k=C(ot),B=c(ot,"LI",{});var zt=T(B);at=N(zt,`Right click on the directory, click on "Properties", then "Customize", and "Change Icon".
					`),J=c(zt,"STRONG",{"data-svelte-h":!0}),y(J)!=="svelte-pf5xwt"&&(J.textContent=W),ct=C(zt),it=c(zt,"DETAILS",{});var Pt=T(it);nt=c(Pt,"SUMMARY",{"data-svelte-h":!0}),y(nt)!=="svelte-8586dg"&&(nt.textContent=Lt),dt=C(Pt),G=c(Pt,"UL",{});var tt=T(G);ut=c(tt,"LI",{});var Ot=T(ut);_=c(Ot,"STRONG",{});var Ve=T(_);I=N(Ve,`Disclaimer: it may not work due to "EnableShellShortcutIconRemotePath", this this
								`),Y(x.$$.fragment,Ve),Ve.forEach(f),lt=N(Ot,`.
								Windows moment. The fallback is to `),pt=c(Ot,"STRONG",{"data-svelte-h":!0}),y(pt)!=="svelte-19cw1zi"&&(pt.textContent=Kt),Ot.forEach(f),Bt=C(tt),gt=c(tt,"LI",{"data-svelte-h":!0}),y(gt)!=="svelte-1mbi968"&&(gt.textContent=Qt),At=C(tt),ft=c(tt,"LI",{});var ce=T(ft);we=N(ce,`Open the desktop.ini file in the directory you want to customize. (System files
								should be visible in directory settings, a tutorial is available
								`),Y($t.$$.fragment,ce),ke=N(ce,".)"),ce.forEach(f),ye=C(tt),Ut=c(tt,"LI",{"data-svelte-h":!0}),y(Ut)!=="svelte-ikw0oc"&&(Ut.innerHTML=Ye),Te=C(tt),mt=c(tt,"LI",{});var Yt=T(mt);xe=N(Yt,`Add the following lines (adapt the path to your icon):
								`),Dt=c(Yt,"PRE",{"data-svelte-h":!0}),y(Dt)!=="svelte-zamgj0"&&(Dt.innerHTML=Xe),Ee=N(Yt,`
								This is documented `),Y(Ct.$$.fragment,Yt),Ie=N(Yt,"."),Yt.forEach(f),Se=C(tt),Gt=c(tt,"LI",{"data-svelte-h":!0}),y(Gt)!=="svelte-1r1vnhf"&&(Gt.textContent=Ke),tt.forEach(f),Pt.forEach(f),zt.forEach(f),ze=C(ot),Mt=c(ot,"LI",{"data-svelte-h":!0}),y(Mt)!=="svelte-tacruh"&&(Mt.textContent=Qe),ot.forEach(f),St.forEach(f),Pe=C(_t),Ht=c(_t,"LI",{"data-svelte-h":!0}),y(Ht)!=="svelte-yrnoox"&&(Ht.innerHTML=tn),Le=C(_t),jt=c(_t,"LI",{"data-svelte-h":!0}),y(jt)!=="svelte-1sjeycq"&&(jt.innerHTML=en),_t.forEach(f),Oe=C(p),qt=c(p,"H2",{"data-svelte-h":!0}),y(qt)!=="svelte-14j343v"&&(qt.textContent=nn),Re=C(p),bt=c(p,"P",{});var ee=T(bt);Ne=N(ee,`Go to an icon picker, such as the
		`),Y(wt.$$.fragment,ee),Be=N(ee,`
		and choose an icon. Once you found your favorite one,
		`),Ft=c(ee,"STRONG",{"data-svelte-h":!0}),y(Ft)!=="svelte-5mbea7"&&(Ft.textContent=on),ee.forEach(f),Ae=C(p),kt=c(p,"TEXTAREA",{class:!0}),T(kt).forEach(f),Ue=C(p),rt.l(p),se=C(p),Vt=c(p,"H2",{"data-svelte-h":!0}),y(Vt)!=="svelte-esyya1"&&(Vt.textContent=sn),De=C(p),Jt=c(p,"P",{"data-svelte-h":!0}),y(Jt)!=="svelte-1rts1qj"&&(Jt.textContent=ln),Ge=C(p),Y(yt.$$.fragment,p),Me=C(p),Wt=c(p,"H2",{"data-svelte-h":!0}),y(Wt)!=="svelte-14hqlcr"&&(Wt.textContent=rn),He=C(p),Y(Tt.$$.fragment,p),je=C(p),Q&&Q.l(p),ie=C(p),xt=c(p,"BUTTON",{class:!0,"data-svelte-h":!0}),y(xt)!=="svelte-1w746je"&&(xt.textContent=an),p.forEach(f),le=C(m),Et=c(m,"FOOTER",{});var ue=T(Et);Zt=c(ue,"P",{"data-svelte-h":!0}),y(Zt)!=="svelte-1up45he"&&(Zt.textContent=cn),qe=C(ue),te=c(ue,"P",{});var hn=T(te);Y(It.$$.fragment,hn),hn.forEach(f),ue.forEach(f),this.h()},h(){d(kt,"class","svelte-1vzdq3v"),d(xt,"class","g-accent")},m(m,p){E(m,t,p),E(m,o,p),E(m,n,p),r(n,i),r(n,h),r(n,u),r(u,v),r(v,w),r(v,b),r(v,L),r(v,S),r(S,z),r(S,O),r(S,g),r(S,A),r(S,F),r(S,k),r(S,B),r(B,at),r(B,J),r(B,ct),r(B,it),r(it,nt),r(it,dt),r(it,G),r(G,ut),r(ut,_),r(_,I),X(x,_,null),r(ut,lt),r(ut,pt),r(G,Bt),r(G,gt),r(G,At),r(G,ft),r(ft,we),X($t,ft,null),r(ft,ke),r(G,ye),r(G,Ut),r(G,Te),r(G,mt),r(mt,xe),r(mt,Dt),r(mt,Ee),X(Ct,mt,null),r(mt,Ie),r(G,Se),r(G,Gt),r(S,ze),r(S,Mt),r(u,Pe),r(u,Ht),r(u,Le),r(u,jt),r(n,Oe),r(n,qt),r(n,Re),r(n,bt),r(bt,Ne),X(wt,bt,null),r(bt,Be),r(bt,Ft),r(n,Ae),r(n,kt),M(kt,s[0]),r(n,Ue),rt.m(n,null),r(n,se),r(n,Vt),r(n,De),r(n,Jt),r(n,Ge),X(yt,n,null),r(n,Me),r(n,Wt),r(n,He),X(Tt,n,null),r(n,je),Q&&Q.m(n,null),r(n,ie),r(n,xt),E(m,le,p),E(m,Et,p),r(Et,Zt),r(Et,qe),r(Et,te),X(It,te,null),re=!0,Fe||(un=[et(kt,"input",s[4]),et(xt,"click",s[3])],Fe=!0)},p(m,[p]){const _t={};p&128&&(_t.$$scope={dirty:p,ctx:m}),x.$set(_t);const St={};p&128&&(St.$$scope={dirty:p,ctx:m}),$t.$set(St);const ot={};p&128&&(ot.$$scope={dirty:p,ctx:m}),Ct.$set(ot);const zt={};p&128&&(zt.$$scope={dirty:p,ctx:m}),wt.$set(zt),p&1&&M(kt,m[0]),ae===(ae=fn(m,p))&&rt?rt.p(m,p):(rt.d(1),rt=ae(m),rt&&(rt.c(),rt.m(n,se)));const Pt={};p&1&&(Pt.svgText=Je(m[0])?m[0].trim():""),p&2&&(Pt.imgFormat=m[1]),yt.$set(Pt);const tt={};p&130&&(tt.$$scope={dirty:p,ctx:m}),Tt.$set(tt),m[1]===st.ICO&&m[2].size!==256?Q||(Q=wn(),Q.c(),Q.m(n,ie)):Q&&(Q.d(1),Q=null);const Ot={};p&128&&(Ot.$$scope={dirty:p,ctx:m}),It.$set(Ot)},i(m){re||(U(x.$$.fragment,m),U($t.$$.fragment,m),U(Ct.$$.fragment,m),U(wt.$$.fragment,m),U(yt.$$.fragment,m),U(Tt.$$.fragment,m),U(It.$$.fragment,m),re=!0)},o(m){D(x.$$.fragment,m),D($t.$$.fragment,m),D(Ct.$$.fragment,m),D(wt.$$.fragment,m),D(yt.$$.fragment,m),D(Tt.$$.fragment,m),D(It.$$.fragment,m),re=!1},d(m){m&&(f(t),f(o),f(n),f(le),f(Et)),K(x),K($t),K(Ct),K(wt),rt.d(),K(yt),K(Tt),Q&&Q.d(),K(It),Fe=!1,kn(un)}}}let go=/^<svg.*>.*<\/svg>$/g,mo=/<script>|<iframe>|<object>|<embed>|<form>|<html>/g;function Je(s){return s=s.trim(),new RegExp(go).test(s)&&!new RegExp(mo).test(s)}function _o(s,t,e){let o,n;ge(s,Ze,w=>e(6,o=w)),ge(s,H,w=>e(2,n=w));let i="",l=st.PNG;async function h(){if(o)try{const w=await o.exportToFormat(l),b=document.createElement("a");b.href=URL.createObjectURL(w),b.download="icon."+l.split("/")[1],b.click()}catch(w){console.error(w),alert("An error occurred while exporting the icon (see logs).")}}function u(){i=this.value,e(0,i)}function v(){l=Tn(this),e(1,l)}return[i,l,n,h,u,v]}class wo extends $e{constructor(t){super(),Ce(this,t,_o,po,_e,{})}}export{wo as component};
